name: Keep Alive

on:
  schedule:
    # Every 14 minutes
    - cron: '*/14 * * * *'
  workflow_dispatch: # Manual trigger

jobs:
  keep-alive:
    runs-on: ubuntu-latest
    steps:
      - name: Ping API
        run: |
          curl -fsS --retry 3 --retry-delay 5 \
            "https://pricing-optimization-api.onrender.com/health" \
            || echo "API ping failed"
      
      - name: Ping UI
        run: |
          curl -fsS --retry 3 --retry-delay 5 \
            "https://pricing-optimisation-project.onrender.com/" \
            || echo "UI ping failed"
      
      - name: Log status
        run: echo "Keep-alive pings completed at $(date)"
